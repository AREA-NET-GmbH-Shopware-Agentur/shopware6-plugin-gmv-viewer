!function(){"use strict";var e={629:function(e,r,t){t.r(r),t.d(r,{default:function(){return n}});var n={template:"{% block sw_dashboard_index_content_info_grid %}\n    {% parent() %}\n\n    <an-gmv-table></an-gmv-table>\n{% endblock %}"}}},r={};function t(n){var a=r[n];if(void 0!==a)return a.exports;var o=r[n]={exports:{}};return e[n](o,o.exports,t),o.exports}t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="bundles/areanetgmvviewer/",window?.__sw__?.assetPath&&(t.p=window.__sw__.assetPath+"/bundles/areanetgmvviewer/"),function(){let{Criteria:e}=Shopware.Data;Shopware.Component.register("an-gmv-table",{inject:["repositoryFactory"],template:'{% block areanet_gmv_table %}\n<sw-card class="an-gmv-dashboard-card">\n    <template #title>\n        {{ $tc(\'areanet-gmv.general.dashboardTitle\') }}\n    </template>\n\n    <div v-if="error">\n        <sw-alert variant="error">{{ error }}</sw-alert>\n    </div>\n\n    <div v-else-if="result && result.total > 0">\n        <sw-data-grid\n            :columns="[\n                { property: \'year\', label: $tc(\'areanet-gmv.list.columnYear\') },\n                { property: \'gmv\', label: $tc(\'areanet-gmv.list.columnGmv\'), align: \'right\', }\n            ]"\n            :dataSource="result"\n            :showSelection="false"\n            :show-actions="false"\n            :isLoading="isLoading"\n\n        >\n            <template #column-gmv="{ item }">\n                {{ currencyFilter(item.gmv, \'EUR\') }}\n            </template>\n        </sw-data-grid>\n    </div>\n\n    <div v-else>\n        {{ $tc(\'areanet-gmv.general.noData\') }}\n    </div>\n\n</sw-card>\n{% endblock %}\n',data:function(){return{result:null,isLoading:!0,error:null}},computed:{currencyFilter(){return Shopware.Filter.getByName("currency")},gmvRepository(){return this.repositoryFactory.create("areanet_gmv")}},created(){this.fetchLastThreeYearsGmv()},methods:{async fetchLastThreeYearsGmv(){this.isLoading=!0,this.error=null;let r=new Date().getFullYear(),t=new e;t.addFilter(e.equalsAny("year",[r-2,r-1,r])),t.addSorting(e.sort("year","DESC"));try{this.result=await this.gmvRepository.search(t)}catch(e){this.error="Fehler beim Laden der GMV-Daten.",console.error(this.error,e)}finally{this.isLoading=!1}console.log(this.error),console.log(this.result)}}}),t(629),Shopware.Component.override("sw-dashboard-index",()=>Promise.resolve().then(t.bind(t,629)))}()}();